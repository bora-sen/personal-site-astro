---
import { works } from "../dataset.json"
const sel_works = works.slice(0, 4)
---

<section class="w-full h-auto text-white mt-6">
  <h5 class="w-full text-center font-tusker text-9xl font-bold mb-4">Works</h5>
  {
    sel_works.map((work) => {
      return (
        <div id="parallax_card" class="flex w-full lg:flex-row flex-col h-screen bg-black z-10 mt-12 sm:pt-0 pt-14">
          <div class="lg:w-1/2 w-full lg:h-full">
            <div class="h-full flex items-center justify-center bg-primary-purple p-12">
              <img
                width="100%"
                height="100%"
                class="transition-all hover:drop-shadow-[10px_10px_0_rgba(3,3,0,1)]"
                src={work.placeholderImg}
                alt={`${work.title}'s placeholder`}
              />
            </div>
          </div>
          <div class="lg:w-1/2 grid my-auto p-4">
            <h4 class="font-tusker text-8xl md:text-9xl">{work.title}</h4>
            <p class="leading-relaxed text-lg my-4 uppercase w-full lg:w-[37rem] h-24 text-ellipsis overflow-hidden sm:whitespace-normal">{work.desc}</p>
            <a
              class="block mx-auto border-2 border-white px-4 py-2 rounded-full hover:bg-white hover:text-black hover:text-bold transition-all"
              href={work.redURL}
            >
              Go To Project
            </a>
          </div>
        </div>
      )
    })
  }
</section>

<script>
  import { gsap } from "gsap"
  import { ScrollTrigger } from "gsap/ScrollTrigger"
  document.addEventListener("DOMContentLoaded", () => {
    gsap.utils.toArray("#parallax_card").forEach((panel) => {
      ScrollTrigger.create({
        trigger: panel,
        start: "top top",
        pin: true,
        pinSpacing: false,
        scrub: true,
        snap: 1,
      })
    })
  })
</script>
